<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOM4</title>
  </head>
  <body bgcolor="black" text="white">
    <ul id="car-list">
      <li class="brand luxury">Mercedes-Benz</li>
      <li class="brand economy">Toyota</li>
      <li class="brand luxury">Tesla</li>
      <li class="brand sport">Ferrari</li>
      <li class="brand economy">Honda</li>
      <li class="brand luxury">BMW</li>
      <li class="brand economy">Ford</li>
      <li class="brand sport">Lamborghini</li>
      <li class="brand economy">Hyundai</li>
      <li class="brand luxury">Audi</li>
    </ul>
  </body>
  <script>

// Adding document tag
    function addCar(carName, selector = "") {
      const li = document.createElement("li");
      li.textContent = carName;

      // Logic to detect # or .
      if (selector.startsWith("#")) {
        // .slice(1) removes the '#' and keeps the rest of the name
        li.id = selector.slice(1);
      } else if (selector.startsWith(".")) {
        // .slice(1) removes the '.' and keeps the rest of the name
        li.className = selector.slice(1);
      }

      const ul = document.querySelector("#car-list");
      ul.appendChild(li);
    }
 
// Editing document tag
    function editCar(selector, carName, withSelector, withCarName) {
      const currentElementList = document.querySelectorAll(selector);

      currentElementList.forEach((element) => {
        if (element.textContent.trim() === carName) {
          const newElement = document.createElement("li");
          newElement.textContent = withCarName;

          if (selector.startsWith("#")) {
            newElement.id = withSelector.slice(1);
          } else if (selector.startsWith(".")) {
            newElement.className = withSelector.slice(1).split(".").join(" ");
          }

          element.replaceWith(newElement)
        }

      });
    }

    // Editing nth Child but with no id and class adding
    function nthChildEdit(name,nth){
    const nthChild = document.querySelector(`li:nth-of-type(${nth})`)
    const newLi = document.createElement("li")
    newLi.textContent = name
    if (!nthChild) {
    console.log(`No li element found at ${nth} position so adding it in last`);
    const parentNode = document.querySelector("ul")
    if (!parentNode){
      console.log("Failed to add since parent ul does not exist")
      return "FAILED"
    }
    
      parentNode.appendChild(newLi)

    return "DONE"
    }

    nthChild.replaceWith(newLi)
    return "DONE"
    }

    // editing with outerHTML SIMPLEST
    function editWithOuterHTML(name,className,nth){

      const nthChild = document.querySelector(`li:nth-of-type(${nth})`)
      nthChild.outerHTML = `<li class='${className}'>${name}</li>`
    }
    
    // Remove tags
    function removeTag(tag,tagClass){

    document.querySelectorAll(tag).forEach(
      (item) =>{
        if (item.className === tagClass){
          item.remove()
        }

          /*
          
        if (item.classList.contains("brand")) {
            console.log(item.textContent, "has class 'brand'")
            item.remove()
        }
          */
      }
    )

    }

    addCar("Volvo", ".brand luxury");
    editCar(".economy", "Hyundai", ".brand.sport", "Mazda");
    editWithOuterHTML("Maruti","brand ecomony",1)



  </script>
</html>
